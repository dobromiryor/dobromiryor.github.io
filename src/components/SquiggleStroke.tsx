import clsx from "clsx";
import { useMemo, type SVGProps } from "react";

import { useTheme } from "../hooks/useTheme";

interface SquiggleStrokeProps extends SVGProps<SVGSVGElement> {}

export const SquiggleStroke = ({
	className,
	...props
}: SquiggleStrokeProps) => {
	const theme = useTheme();
	const line = useMemo(
		() => PATHS[Math.floor(Math.random() * PATHS.length)],
		[]
	);
	const gradients = useMemo(
		() => GRADIENTS[theme][Math.floor(Math.random() * GRADIENTS[theme].length)],
		[theme]
	);

	return (
		<>
			<svg
				className={clsx("pointer-events-none", className)}
				{...props}
				preserveAspectRatio="xMidYMid slice"
				version="1.1"
				viewBox="0 0 800 200"
				width="100%"
				xmlns="http://www.w3.org/2000/svg"
			>
				<path
					d={line?.d}
					fill="none"
					stroke={`url("#${gradients?.[0]["data-id"]}")`}
					strokeDasharray={STROKE_DASHARRAY}
					strokeLinecap="round"
					strokeWidth={STROKE_WIDTH}
					transform={line?.transform}
				></path>

				<defs>
					<linearGradient id={gradients?.[0]["data-id"]}>
						{gradients?.map((gradient) => (
							<stop
								key={`Gradient__${gradient.stopColor}__${gradient.offset}`}
								{...gradient}
							></stop>
						))}
					</linearGradient>
				</defs>
			</svg>
		</>
	);
};

const STROKE_WIDTH = 20;
const STROKE_DASHARRAY = 50;

const PATHS = [
	{
		d: "M5.546377298344282 36.724096852655066C28.266856150934203 33.43560655724491 112.27283823202959 16.09629432173059 141.86925041388383 16.99315508019413C171.46566259573808 17.890015838657668 155.9200698108565 42.852645554259276 183.12485038946977 42.105261403436316C210.32963096808305 41.357877252613356 253.22947481980833 11.163558401778193 305.0979338855635 12.508850175256384C356.9663929513187 13.854141948734576 441.7197600574385 47.03799867442732 494.335604784001 50.17701204430546C546.9514495105635 53.31602541418359 586.2638477853031 30.446069636061637 620.7930022449385 31.342930394525183C655.3221567045739 32.23979115298873 675.053134080876 57.351898429905226 701.5105315418135 55.55817659508671C727.967929002751 53.76445476026819 766.5329110991051 26.41019558719283 779.5373870105635 20.58059938561405 ",
		transform: "matrix(0.95,0,0,0.95,19.910313796997116,1.750080013275145)",
	},
	{
		d: "M9.464244052288905 -64.05474138033989C16.340178017336104 -74.66759641739333 30.540476962445155 -132.06670029732192 50.71984784257211 -127.73187160266045C70.89921872269906 -123.397042907999 92.42387629004119 -38.04576921237114 130.54046933305062 -38.04576921237114C168.65706237606005 -38.04576921237114 207.0726196016053 -130.42245387805107 279.41940610062875 -127.73187160266045C351.7661925996522 -125.04128932726982 498.25347185583706 -22.05175240608655 564.6211883271912 -21.90227556002739C630.9889047985454 -21.752798713968232 650.2714467093527 -127.13396453631523 677.6257049287537 -126.83501052630547C704.9799631481548 -126.5360565162957 708.5673654919048 -23.098088023787767 728.7467376435975 -20.108551499968797C748.9261097952902 -17.119014976149828 787.0427378063579 -94.0995847361545 798.70193783891 -108.89779138339165 ",
		transform:
			"matrix(0.95,0,0,0.9500000000000001,17.0179355621338,143.83732376098632)",
	},
	{
		d: "M2.0533399177174942 -137.97497635967892C34.041381000735484 -120.93461825338365 143.75736979569805 -36.18125822034837 193.9815864158254 -35.73282772190731C244.20580303595275 -35.28439722346626 267.82315440898947 -135.7328250198301 303.39863963848165 -135.28439336903256C338.97412486797384 -134.835961718235 371.2611020001353 -32.44433047262193 407.43449779277853 -33.04223781712216C443.6078935854218 -33.640145161622385 490.09521353171084 -138.42340578523638 520.439014394341 -138.8718374360339C550.7828152569713 -139.32026908683142 544.5047797752004 -36.4802119124667 589.4973029685598 -35.73282772190731C634.4898261619192 -34.985443531347926 756.9113451235077 -117.94508153088253 790.3941535544973 -134.38753229267758 ",
		transform: "matrix(0.95,0,0,0.95,19.99999365806582,148.02636654376983)",
	},
	{
		d: "M20.179371923610006 50.22421654671268C39.31240662972573 46.33781886706587 109.56652014494382 24.813154941894975 134.97758016030434 26.905830468831823C160.38864017566485 28.99850599576867 138.71449320555175 59.19282603869673 172.6457320157731 62.780269708333776C206.57697082599444 66.36771337797083 287.5934147143408 50.822122023600706 338.56501302163247 48.43049248665409C389.53661132892415 46.03886294970747 432.28698262612465 44.84304818123417 478.4753218595231 48.43049248665409C524.6636610929215 52.01793679207401 581.1658939623877 65.17189988106327 615.6950484220231 69.95515831917362C650.2242028816585 74.73841675728397 666.3677372241065 85.65022254595992 685.6502486173356 77.1300431153162C704.9327600105647 68.60986368467249 715.9940087898616 26.905830150940382 731.3901167813981 18.834081735311315C746.7862247729346 10.762333319682247 770.254099935695 27.055307473836706 778.0268965665543 28.699552621541784 ",
		transform: "matrix(1,0,0,1,-5.684341886080802e-14,2.842170943040401e-14)",
	},
	{
		d: "M12.10762282316864 43.37975844184575C23.168908001035255 39.79231429537155 62.4813132693865 18.716080272595264 78.47533389036835 21.855093563000537C94.4693545113502 24.99410685340581 81.6143478165565 63.26017594774581 108.07174654905975 62.21383818427739C134.52914528156302 61.16750042080898 165.91927564248425 14.829682592948451 237.21972628538788 15.57706698218999C308.5201769282915 16.32445137143153 444.245147427966 66.10023713548995 535.8744504064816 66.69814451972661C627.5037533849973 67.29605190396327 745.1420285314816 27.086783492962695 786.9955441564816 19.164511287609912 ",
		transform: "matrix(0.95,0,0,0.95,19.977579641342174,1.7263988494873033)",
	},
	{
		d: "M20.179371051189605 69.05829700760759C57.84753212551008 61.285501648313975 159.04334689398337 20.627802699135913 246.18833749711246 22.421524851845874C333.33332810024154 24.215247004555835 454.70850198685855 80.56801399521746 543.049314669964 79.82062992386736C631.3901273530695 79.07324585251726 737.3692304414484 28.251122007098964 776.2332135957453 17.937220423745288 ",
	},
];

const GRADIENTS = {
	light: [
		[
			{ "data-id": "l1", stopColor: "#ffcf3d", offset: "0" },
			{ "data-id": "l1", stopColor: "#ffdf7c", offset: "1" },
		],
		[
			{ "data-id": "l2", stopColor: "#ffe69c", offset: "0" },
			{ "data-id": "l2", stopColor: "#ffb59c", offset: "1" },
		],
		[
			{ "data-id": "l3", stopColor: "#ff9d7c", offset: "0" },
			{ "data-id": "l3", stopColor: "#ff6e3d", offset: "1" },
		],
		[
			{ "data-id": "l4", stopColor: "#80e8f7", offset: "0" },
			{ "data-id": "l4", stopColor: "#d0f8ff", offset: "1" },
		],
		[
			{ "data-id": "l5", stopColor: "#faf470", offset: "0" },
			{ "data-id": "l5", stopColor: "#ffffb4", offset: "1" },
		],
		[
			{ "data-id": "l6", stopColor: "#d186f7", offset: "0" },
			{ "data-id": "l6", stopColor: "#e6d5ff", offset: "1" },
		],
	],
	dark: [
		[
			{ "data-id": "d1", stopColor: "#ff0095", offset: "0" },
			{ "data-id": "d1", stopColor: "#f72e53", offset: "1" },
		],
		[
			{ "data-id": "d2", stopColor: "#6200a8", offset: "0" },
			{ "data-id": "d2", stopColor: "#d600d3", offset: "1" },
		],
		[
			{ "data-id": "d3", stopColor: "#f27b5a", offset: "0" },
			{ "data-id": "d3", stopColor: "#efc583", offset: "1" },
		],
		[
			{ "data-id": "d4", stopColor: "#de0ee1", offset: "0" },
			{ "data-id": "d4", stopColor: "#ef2df2", offset: "1" },
		],
		[
			{ "data-id": "d5", stopColor: "#f143f3", offset: "0" },
			{ "data-id": "d5", stopColor: "#6d43f3", offset: "1" },
		],
		[
			{ "data-id": "d6", stopColor: "#5b2df2", offset: "0" },
			{ "data-id": "d6", stopColor: "#400ee1", offset: "1" },
		],
	],
};
